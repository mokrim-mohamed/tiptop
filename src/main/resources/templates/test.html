<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dynamic Gauge Chart</title>
    <script src="https://cdn.zingchart.com/zingchart.min.js"></script>
    <style>
        body {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            margin: 0;
            font-family: Arial, sans-serif;
        }
        #myChart {
            width: 80%;
            max-width: 600px;
        }
        .zc-ref {
            display: none;
        }
    </style>
</head>
<body>
    <div id="myChart"></div>

    <script>
        // Récupère la valeur dynamique de Thymeleaf
        var percent = [[${percent}]];;

        var myConfig = {
            type: "gauge",
            globals: {
                fontSize: 25,
            },
            plotarea: {
                marginTop: 100,
            },
            plot: {
                size: "100%",
                valueBox: {
                    placement: "center",
                    text: "%v%",
                    fontSize: 25,
                },
            },
            scaleR: {
                aperture: 180,
                minValue: 0,
                maxValue: 100,
                step: 25,
                center: {
                    visible: false,
                },
                labels: [],
                ring: {
                    size: 50,
                    rules: [
                        {
                            rule: "%v < 25",
                            backgroundColor: "#E53935",
                        },
                        {
                            rule: "%v >= 25 && %v < 50",
                            backgroundColor: "#FFFF00",
                        },
                        {
                            rule: "%v >= 50 && %v < 75",
                            backgroundColor: "#3CB371",
                        },
                        {
                            rule: "%v >= 75",
                            backgroundColor: "#29B6F6",
                        },
                    ],
                },
            },
            series: [
                {
                    values: [percent], // Utilise la valeur dynamique
                    backgroundColor: "black",
                    indicator: [10, 5, 5, 5, 0.75],
                    animation: {
                        effect: 2,
                        method: 1,
                        sequence: 4,
                        speed: 900,
                    },
                },
            ],
        };

        zingchart.render({
            id: "myChart",
            data: myConfig,
            height: 500,
            width: "100%",
        });
    </script>
</body>
</html>
